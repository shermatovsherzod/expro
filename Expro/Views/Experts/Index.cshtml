@{
    ViewData["Title"] = "Эксперты";
}
<div class="text-center">
    <h4>@ViewData["Title"]</h4>
</div>



<br />
<div id="tableBox">
    <div class="spinner-border spinner" style="display: none;"></div>
    <table id="list" width="100%">
        <thead>
            <tr>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div class="spinner-border spinner" style="display: none;"></div>
</div>

<link href="~/lib/DataTables-1.10.22/datatables.css" rel="stylesheet" />

@section Scripts
{
    <script src="~/lib/DataTables-1.10.22/datatables.js"></script>
    <script>
        var table;

        $(document).ready(function () {
            table = $("table#list").DataTable({
                searching: false,
                ordering: false,
                processing: true,
                serverSide: true,
                scrollX: true,
                lengthChange: false,
                language: InitDataTableLanguage(),
                ajax:
                {
                    url: "/Experts/Search",
                    type: "POST",
                    datatype: "json",
                    data: function (d) {
                    },
                },
                columns: [
                    {
                        "data": 0,
                        "render": function (data, type, full, meta) {

                            var html = '';
                            html += '<div class="container space-2">';
                            html += '<div class="border-bottom w-md-75 w-lg-60 space-bottom-2 mx-md-auto">';
                            html += '<div class="media d-block d-sm-flex">';

                            html += '<div class="avatar avatar-xxl avatar-circle mr-4" style="width: 160px; height: 160px;">';
                            html += '<img class="avatar-img" src="' + full.avatar.url + '" alt="">';
                            if (full.isOnline) {
                                html += '<span class="avatar-status avatar-lg-status avatar-success"></span>';
                            }
                            html += '</div>';

                            html += '<div class="media-body">';
                            html += '<div class="d-flex justify-content-between align-items-center mb-2">';
                            html += '<h1 class="h3">' + full.firstName + ' ' + full.lastName + ' <img class="avatar avatar-xs mb-3" src="/lib/frontTheme/svg/illustrations/top-vendor.svg" alt="Review rating" data-toggle="tooltip" data-placement="top" title="" data-original-title="Эксперт подтвержден"></h1>';
                            html += '<div class="d-block">';
                            html += '<a class="btn btn-xs btn-outline-primary font-weight-bold text-nowrap ml-1" href="/Experts/Details/' + full.id + '">';
                            html += 'Просмотр</a>';
                            html += '</div>';
                            html += '</div>';
                            html += '<div class="row text-body font-size-1 mb-2">';
                            html += '<div class="col-auto">';
                            html += '<span class="h6">' + full.points + '</span>';
                            html += '<span> Points</span>';
                            html += '</div>';
                            html += '<div class="col-auto">';
                            html += '<span class="h6">' + full.rating + '</span>';
                            html += '<span> Rating</span>';
                            html += '</div>';
                            html += '</div>';
                            html += '<p class="mb-0">' + full.aboutMe + '</p > ';
                            html += '</div>';
                            html += '</div>';
                            html += '</div>';
                            html += '</div>';

                            return html;
                        }
                    },
                ]
            });

            table
                .on('preDraw', function () {
                    $("#tableBox .spinner").show();
                })
                .on('draw.dt', function () {
                    $("#tableBox .spinner").hide();
                });

            $("#statusDD").change(function () {
                table.draw();
            });
        });
    </script>

    <script>
        // INITIALIZATION OF SELECT2
        // =======================================================
        $('.js-custom-select').each(function () {
            var select2 = $.HSCore.components.HSSelect2.init($(this));
        });
    </script>
}
